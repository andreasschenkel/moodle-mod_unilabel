define("unilabeltype_imageboard/editmodal",["exports","jquery"],(function(_exports,_jquery){var obj;
/**
   * Unilabel type imageboard
   *
   * @author      Andreas Schenkel
   * @copyright   Andreas Schenkel {@link https://github.com/andreasschenkel}
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};const fixModalPosition=modalselector=>{var modal=document.querySelector(modalselector),form=modal.closest("form");(0,_jquery.default)(modalselector).on("show.bs.modal",(function(){form.append(modal)})),(0,_jquery.default)(document).on("show.bs.modal",".modal",(function(){var zIndex=1040+10*(0,_jquery.default)(".modal:visible").length;(0,_jquery.default)(this).css("z-index",zIndex),setTimeout((function(){(0,_jquery.default)(".modal-backdrop").not(".modal-stack").css("z-index",zIndex-1).addClass("modal-stack")}),100)})),(0,_jquery.default)(document).on("hidden.bs.modal",(function(){(0,_jquery.default)(".modal.show").length>0&&(0,_jquery.default)("body").addClass("modal-open")}))};_exports.init=()=>{const modalId="unilabeltype_imageboard_modal";for(var singelelementheader,hidenumber=0,counter=0;counter<1e4&&(singelelementheader=document.querySelector("#id_singleelementheader_"+hidenumber));)singelelementheader.classList.add("d-none"),hidenumber++,counter++;var actualnumber=-1,currentparent=null;fixModalPosition("#"+modalId),document.querySelector("#imageboardcontainer").addEventListener("click",(function(e){if("imageaction"===e.target.dataset.type&&(actualnumber=parseInt(e.target.dataset.number),(0,_jquery.default)("#"+modalId).modal()),"deleteimage"===e.target.dataset.type){e.stopPropagation(),e.preventDefault();var deletenumber=parseInt(e.target.dataset.number);(0,_jquery.default)("#unilabel_imageboard_confirm_inline_"+deletenumber).modal()}})),(0,_jquery.default)("#"+modalId).on("show.bs.modal",(function(){var src=document.querySelector("#id_singleelementheader_"+actualnumber+" .element-edit-container");currentparent=src.parentElement,document.querySelector("#"+modalId+" .modal-body").append(src)})),(0,_jquery.default)("#"+modalId).on("hidden.bs.modal",(function(){var src=document.querySelector("#"+modalId+" .modal-body .element-edit-container");currentparent.append(src)})),document.querySelector('[id^="mform"]').addEventListener("itemadded",(function(e){actualnumber=e.detail,(0,_jquery.default)("#"+modalId).modal()}));var modal=document.querySelector("#"+modalId+".draggable"),header=modal.querySelector(".modal-header");function handleStart(e){e.preventDefault();var touch=e.touches?e.touches[0]:e,offsetX=touch.clientX-modal.getBoundingClientRect().left,offsetY=touch.clientY-modal.getBoundingClientRect().top;function moveHandler(e){e.preventDefault();var moveTouch=e.touches?e.touches[0]:e;modal.style.left=moveTouch.clientX-offsetX+"px",modal.style.top=moveTouch.clientY-offsetY+"px"}function endHandler(){document.removeEventListener("mousemove",moveHandler),document.removeEventListener("mouseup",endHandler),document.removeEventListener("touchmove",moveHandler),document.removeEventListener("touchend",endHandler)}document.addEventListener("mousemove",moveHandler),document.addEventListener("mouseup",endHandler),document.addEventListener("touchmove",moveHandler),document.addEventListener("touchend",endHandler)}header.addEventListener("mousedown",handleStart),header.addEventListener("touchstart",handleStart)}}));

//# sourceMappingURL=editmodal.min.js.map